
 const express = require('express');
 const pool = require('./db');

 const app = express();
 const cors = require('cors');

 app.use(express.json());
 app.use(cors());


 app.post('/addUser' , (req,res) => {
     const user_name = req.body["user_name"];
     const user_password = req.body["user_password"];

     res.send("Response added" + req.body)

     const insertSt = `INSERT INTO USERS_INFO (user_name ,user_password) VALUES ('${user_name}' , '${user_password}');`

     pool.query(insertSt).then((response) => {

         console.log("insertion done");
         console.log(response);
     })
     .catch((error) => {
         console.log(error);
     })
 })

  app.get("/api", (req, res) => {
      res.json({ "users": ["one", "two", "three"] });
    });

  app.get('/message', (req, res) => {
      res.json({ message: "Hello from server!" });
  });

 app.listen(4000 , () => {
     console.log("Server is running")
 });



 DB notes

 const deleteSt = `DELETE FROM users_info WHERE ID > 20 ;`

pool.query(deleteSt).then((response) => {
    console.log("entries deleted");
    console.log(response);
})
.catch((error) => {
    console.log(error);
})

const createTable = `CREATE TABLE USERS_INFO (
	id SERIAL PRIMARY KEY ,
	user_name VARCHAR(45) UNIQUE NOT NULL ,
	user_password VARCHAR(45) UNIQUE NOT NULL
);`

pool.query(createTable).then((Response) => {
    console.log("Table created");
    console.log(response);
})
.catch((error) => {
    console.log(error);
})

Db notes 

const deleteSt = `DELETE FROM users_info WHERE ID > 20 ;`

pool.query(deleteSt).then((response) => {
    console.log("entries deleted");
    console.log(response);
})
.catch((error) => {
    console.log(error);
})

const createTable = `CREATE TABLE USERS_INFO (
	id SERIAL PRIMARY KEY ,
	user_name VARCHAR(45) UNIQUE NOT NULL ,
	user_password VARCHAR(45) UNIQUE NOT NULL
);`

pool.query(createTable).then((Response) => {
    console.log("Table created");
    console.log(response);
})
.catch((error) => {
    console.log(error);
})



const createTable = `CREATE TABLE USERS_DATA (
	id SERIAL PRIMARY KEY ,
	user_name VARCHAR(45) UNIQUE NOT NULL ,
	user_password VARCHAR(45) NOT NULL
);`

pool.query(createTable).then((response) => {
    console.log("Table created");
    console.log(response);
})
.catch((error) => {
    console.log(error);
})


pool.query(`DROP TABLE users_info;`).then((response) => {
    console.log("table deleted");
    console.log("response");
}).catch((error) => {
    console.log(error);
})

const updateSt = `UPDATE users_info SET user_password = '54321' WHERE user_name = 'awe';`

pool.query(updateSt).then((response) => {
    console.log("entry updated");
    console.log(response);
})
.catch((error) => {
    console.log(error);
})
